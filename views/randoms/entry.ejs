<% layout('layouts/boilerplate') %>

<div class="container min-vh-100 d-flex justify-content-center align-items-center">
    <div class="card shadow card-bg w-100" style="max-width: 500px;">
        <div class="card-body card-bg">
            <h5 class="card-title text-center mb-3">Fun Random Stats!</h5>
            <form action="/random" method="POST" class="needs-validation" novalidate>
                <div class="mb-3">
                    <label class="form-label mb-1" for="randomStat">Choose a Random Stat</label>
                    <select class="form-select" id="randomStat" name="randomStat" required>
                        <option value="" disabled selected>Select Stat Type</option>
                        <option value="LongestHomeRun">Longest Home Run</option>
                        <option value="MostStolenBases">Most Stolen Bases</option>
                        <option value="BestBattingAverage">Best Batting Average</option>
                        <option value="TeamMostWins">Team With Most Wins</option>
                        <option value="PlayerBirthday">Players With Birthday</option>
                        <option value="compareTwoPlayerDropoff">Which Players Had A Greater Impact on Their Team</option>
                        <!-- Add more fun options as needed -->
                    </select>
                </div>
                <div id="dynamicInputs"></div>
                <div class="d-grid mt-3">
                    <button class="btn btn-success">Show Me!</button>
                </div>
            </form>
        </div>
    </div>
</div>

<script>
const dynamicInputs = document.getElementById('dynamicInputs');
const statSelect = document.getElementById('randomStat');

statSelect.addEventListener('change', function() {
    dynamicInputs.innerHTML = '';
    switch (this.value) {
        case 'LongestHomeRun':
            // No extra input needed
            break;
        case 'MostStolenBases':
            dynamicInputs.innerHTML = `
                <div class="mb-2">
                    <label class="form-label mb-1" for="year">Year</label>
                    <input class="form-control" type="number" id="year" name="year" min="1900" max="2025" required>
                </div>
            `;
            break;
        case 'BestBattingAverage':
            dynamicInputs.innerHTML = `
                <div class="mb-2">
                    <label class="form-label mb-1" for="minAtBats">Minimum At Bats</label>
                    <input class="form-control" type="number" id="minAtBats" name="minAtBats" min="1" required>
                </div>
            `;
            break;
        case 'TeamMostWins':
            dynamicInputs.innerHTML = `
                <div class="mb-2">
                    <label class="form-label mb-1" for="season">Season</label>
                    <input class="form-control" type="number" id="season" name="season" min="1900" max="2025" required>
                </div>
            `;
            break;
        case 'PlayerBirthday':
            dynamicInputs.innerHTML = `
                <div class="mb-2">
                    <label class="form-label mb-1" for="month">Month</label>
                    <select class="form-select" id="month" name="month" required>
                        <option value="" disabled selected>Select Month</option>
                        <% for(let m=1; m<=12; m++) { %>
                            <option value="<%= m %>"><%= new Date(0, m-1).toLocaleString('default', { month: 'long' }) %></option>
                        <% } %>
                    </select>
                </div>
                <div class="mb-2">
                    <label class="form-label mb-1" for="day">Day</label>
                    <input class="form-control" type="number" id="day" name="day" min="1" max="31" required>
                </div>
            `;
            break;
    case 'compareTwoPlayerDropoff':
            dynamicInputs.innerHTML = `
                <div class="mb-2">
                    <label class="form-label mb-1" for="player1_first">Player 1 First Name</label>
                    <input class="form-control" type="text" id="player1_first" name="player1_first" required>
                </div>
                <div class="mb-2">
                    <label class="form-label mb-1" for="player1_last">Player 1 Last Name</label>
                    <input class="form-control" type="text" id="player1_last" name="player1_last" required>
                </div>
                <div class="mb-2">
                    <label class="form-label mb-1" for="player2_first">Player 2 First Name</label>
                    <input class="form-control" type="text" id="player2_first" name="player2_first" required>
                </div>
                <div class="mb-2">
                    <label class="form-label mb-1" for="player2_last">Player 2 Last Name</label>
                    <input class="form-control" type="text" id="player2_last" name="player2_last" required>
                </div>
            `;
        default:
            break;
    }
});
</script>